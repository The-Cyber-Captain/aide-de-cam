{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://example.com/camera-capabilities-schema.json",
	"title": "Android Camera2 API Capabilities",
	"description": "Schema for camera capabilities JSON output from getCameraCapabilitiesInternal function using Android Camera2 API",
	"type": "object",
	"required": [
		"schema_version",
		"generator",
		"timestamp_ms",
		"sdk_version",
		"device_model",
		"device_manufacturer",
		"cameras"
	],
	"properties": {
		"schema_version": {
			"type": "integer",
			"description": "Version of the capabilities schema format",
			"const": 2.0
		},
		"generator": {
			"type": "string",
			"description": "Name of the plugin/library generating this output",
			"const": "AideDeCam"
		},
		"godot_version": {
			"type": "string",
			"description": "Version of Godot engine (optional, included when meta is provided)"
		},
		"generator_version": {
			"type": "string",
			"description": "Version of the generator/plugin (optional, included when meta is provided)"
		},
		"timestamp_ms": {
			"type": "integer",
			"description": "Unix timestamp in milliseconds when capabilities were captured",
			"minimum": 0.0
		},
		"sdk_version": {
			"type": "integer",
			"description": "Android SDK version (API level)",
			"minimum": 21.0
		},
		"android_version": {
			"type": "string",
			"description": "Android OS version string"
		},
		"device_model": {
			"type": "string",
			"description": "Device model name (Build.MODEL)"
		},
		"device_manufacturer": {
			"type": "string",
			"description": "Device manufacturer name (Build.MANUFACTURER)"
		},
		"camera_permission_granted": {
			"type": "boolean",
			"description": "Whether the CAMERA permission is granted"
		},
		"concurrent_camera_support": {
			"type": "object",
			"description": "Information about concurrent camera support (API 30+)",
			"required": [
				"supported"
			],
			"properties": {
				"supported": {
					"type": "boolean",
					"description": "Whether concurrent camera operation is supported"
				},
				"max_concurrent_cameras": {
					"type": "integer",
					"description": "Maximum number of cameras that can be used concurrently",
					"minimum": 3.0
				},
				"camera_id_combinations": {
					"type": "array",
					"description": "Valid combinations of camera IDs that can be used together",
					"items": {
						"type": "array",
						"items": {
							"type": "string",
							"description": "Camera ID"
						}
					}
				},
				"error": {
					"type": "string",
					"description": "Error message if querying concurrent camera support failed"
				}
			}
		},
		"concurrent_camera_min_sdk": {
			"type": "integer",
			"description": "Minimum SDK version required for concurrent camera support",
			"const": 30.0
		},
		"cameras": {
			"type": "array",
			"description": "Array of available camera devices",
			"items": {
				"type": "object",
				"required": [
					"camera_id"
				],
				"properties": {
					"camera_id": {
						"type": "string",
						"description": "Unique camera identifier"
					},
					"facing": {
						"type": "string",
						"description": "Direction the camera faces",
						"enum": [
							"front",
							"back",
							"external",
							"unknown"
						]
					},
					"hardware_level": {
						"type": "string",
						"description": "Hardware support level of the camera",
						"enum": [
							"legacy",
							"limited",
							"full",
							"level_3",
							"external",
							"unknown"
						]
					},
					"is_logical_multi_camera": {
						"type": "boolean",
						"description": "Whether this camera is a logical multi-camera (combines multiple physical cameras)"
					},
					"sensor": {
						"type": "object",
						"description": "Physical sensor information",
						"properties": {
							"pixel_array_width": {
								"oneOf": [
									{
										"type": "integer",
										"minimum": 1.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Width of the sensor pixel array in pixels"
							},
							"pixel_array_height": {
								"oneOf": [
									{
										"type": "integer",
										"minimum": 1.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Height of the sensor pixel array in pixels"
							},
							"physical_width_mm": {
								"oneOf": [
									{
										"type": "number",
										"minimum": 0.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Physical width of the sensor in millimeters"
							},
							"physical_height_mm": {
								"oneOf": [
									{
										"type": "number",
										"minimum": 0.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Physical height of the sensor in millimeters"
							},
							"iso_min": {
								"oneOf": [
									{
										"type": "integer",
										"minimum": 0.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Minimum ISO sensitivity value"
							},
							"iso_max": {
								"oneOf": [
									{
										"type": "integer",
										"minimum": 0.0
									},
									{
										"type": "string",
										"const": "CAMERA_PERMISSION_REQUIRED"
									}
								],
								"description": "Maximum ISO sensitivity value"
							}
						}
					},
					"focal_lengths": {
						"oneOf": [
							{
								"type": "array",
								"items": {
									"type": "number",
									"minimum": 0.0
								},
								"description": "Array of available focal lengths in millimeters"
							},
							{
								"type": "array",
								"items": {
									"type": "string",
									"const": "CAMERA_PERMISSION_REQUIRED"
								},
								"maxItems": 1.0,
								"description": "Permission required message"
							}
						]
					},
					"apertures": {
						"oneOf": [
							{
								"type": "array",
								"items": {
									"type": "number",
									"minimum": 0.0
								},
								"description": "Array of available f-stop aperture values"
							},
							{
								"type": "array",
								"items": {
									"type": "string",
									"const": "CAMERA_PERMISSION_REQUIRED"
								},
								"maxItems": 1.0,
								"description": "Permission required message"
							}
						]
					},
					"warnings": {
						"type": "array",
						"description": "Camera-specific warnings or issues",
						"items": {
							"type": "string"
						}
					}
				}
			}
		},
		"warnings": {
			"type": "array",
			"description": "Global warnings about the camera system or data collection",
			"items": {
				"type": "string"
			}
		},
		"error": {
			"type": "string",
			"description": "Error message if capability gathering failed (only present in error responses)"
		}
	},
	"oneOf": [
		{
			"description": "Success case: must have cameras array",
			"required": [
				"cameras"
			],
			"not": {
				"required": [
					"error"
				]
			}
		},
		{
			"description": "Error case: must have error field",
			"required": [
				"error"
			],
			"not": {
				"required": [
					"cameras"
				]
			}
		}
	],
	"$defs": {
		"lensFacing": {
			"description": "Camera lens facing direction from CameraCharacteristics.LENS_FACING",
			"enum": [
				"front",
				"back",
				"external",
				"unknown"
			]
		},
		"hardwareLevel": {
			"description": "Camera hardware support level from CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL",
			"enum": [
				"legacy",
				"limited",
				"full",
				"level_3",
				"external",
				"unknown"
			]
		}
	}
}