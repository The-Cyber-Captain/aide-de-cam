[gd_scene load_steps=7 format=3 uid="uid://byfiroliiyvqy"]

[ext_resource type="StyleBox" uid="uid://ck44vm33io7h3" path="res://InfoBox.tres" id="1_y35qy"]
[ext_resource type="FontFile" uid="uid://cm3updcfcy5k4" path="res://fonts/Bitcount_Single/BitcountSingle-VariableFont_CRSV,ELSH,ELXP,slnt,wght.ttf" id="2_qe2ex"]
[ext_resource type="StyleBox" uid="uid://bwwabbpw0e7yu" path="res://button_normal.tres" id="3_l6ns4"]

[sub_resource type="GDScript" id="GDScript_ykk3c"]
resource_name = "main"
script/source = "extends Control

const WATCH_RETRY_INTERVAL = 2.0
const WAIT_INTERVAL = 0.25

var status_string : String = \"\":
	set(new_string):
		status_string = new_string
		var label : Label = get_node_or_null(\"%StatusLabel\")
		if label:
			%StatusLabel.text = \"Status: %s\" % [new_string]
			
var aide : Object

func _ready():
	status_string = \"Aide-De-Cam plugin not detected\"
	_watch_for_plugin()
	
func _watch_for_plugin():
	if Engine.has_singleton(\"AideDeCam\"):
		aide = Engine.get_singleton(\"AideDeCam\")
		aide.capabilities_updated.connect(_get_capabilties_from_file)
		status_string = \"Connected to singleton\"
		return
		
	await get_tree().create_timer(WATCH_RETRY_INTERVAL).timeout
	_watch_for_plugin()
	
func _get_capabilties_from_file():
	await get_tree().create_timer(WAIT_INTERVAL).timeout
	status_string = \"read json\"
	pass

func _process(_delta):
	print(\"still running\")
"

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_qxvq0"]
content_margin_left = 15.0
content_margin_top = 15.0
content_margin_right = 15.0
content_margin_bottom = 15.0
bg_color = Color(0.696119, 0.706375, 0, 1)
border_width_left = 4
border_width_top = 4
border_width_right = 4
border_width_bottom = 4
border_color = Color(1, 1, 1, 1)
border_blend = true
corner_radius_top_left = 16
corner_radius_top_right = 16
corner_radius_bottom_right = 16
corner_radius_bottom_left = 16

[sub_resource type="GDScript" id="GDScript_u7ly7"]
resource_name = "check"
script/source = "extends Button

var status_string : String =\"\":
	set(new_string):
		status_string = new_string
		var label : Label = get_node_or_null(\"%StatusLabel\")
		if label:
			%StatusLabel.text = new_string

func _ready():
	self.pressed.connect(_on_button_pressed)
	
func _on_button_pressed():
	if not Engine.has_singleton(\"AideDeCam\"):
		status_string = \"Error: no AideDeCam\"
		return
	
	var aide : Object = Engine.get_singleton(\"AideDeCam\")
	aide.getCameraCapabilities()
	status_string = \"Capabilities requested\"
"

[node name="Main" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_ykk3c")

[node name="MarginContainer" type="MarginContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 50
theme_override_constants/margin_top = 50
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 25

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="HeaderContainer" type="HBoxContainer" parent="MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="RigNamePanel" type="PanelContainer" parent="MarginContainer/VBoxContainer/HeaderContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 5.0
theme_override_styles/panel = ExtResource("1_y35qy")

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/VBoxContainer/HeaderContainer/RigNamePanel"]
layout_mode = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 5

[node name="Label" type="Label" parent="MarginContainer/VBoxContainer/HeaderContainer/RigNamePanel/MarginContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("2_qe2ex")
theme_override_font_sizes/font_size = 35
text = "<Rig Name>"
vertical_alignment = 1

[node name="CheckButton" type="Button" parent="MarginContainer/VBoxContainer/HeaderContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 10
size_flags_vertical = 0
theme_override_font_sizes/font_size = 40
theme_override_styles/hover = SubResource("StyleBoxFlat_qxvq0")
theme_override_styles/normal = ExtResource("3_l6ns4")
text = "Check"
script = SubResource("GDScript_u7ly7")

[node name="BoxContainer" type="BoxContainer" parent="MarginContainer/VBoxContainer/HeaderContainer"]
custom_minimum_size = Vector2(100, 1.45519e-11)
layout_mode = 2

[node name="RigInfoPanel" type="PanelContainer" parent="MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/VBoxContainer/RigInfoPanel"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 5

[node name="Label" type="Label" parent="MarginContainer/VBoxContainer/RigInfoPanel/MarginContainer"]
layout_mode = 2
theme_override_fonts/font = ExtResource("2_qe2ex")
theme_override_font_sizes/font_size = 30
text = "<Rig Info>"

[node name="GridMargin" type="MarginContainer" parent="MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 20.0
theme_override_constants/margin_left = 50
theme_override_constants/margin_right = 50

[node name="GridContainer" type="GridContainer" parent="MarginContainer/VBoxContainer/GridMargin"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/h_separation = 35
theme_override_constants/v_separation = 20
columns = 3

[node name="Panel" type="Panel" parent="MarginContainer/VBoxContainer/GridMargin/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Panel2" type="Panel" parent="MarginContainer/VBoxContainer/GridMargin/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Panel3" type="Panel" parent="MarginContainer/VBoxContainer/GridMargin/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Panel4" type="Panel" parent="MarginContainer/VBoxContainer/GridMargin/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Panel5" type="Panel" parent="MarginContainer/VBoxContainer/GridMargin/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="StatusPanel" type="PanelContainer" parent="MarginContainer/VBoxContainer"]
custom_minimum_size = Vector2(1.45519e-11, 35)
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 10
theme_override_styles/panel = ExtResource("1_y35qy")

[node name="MarginContainer" type="MarginContainer" parent="MarginContainer/VBoxContainer/StatusPanel"]
layout_mode = 2
theme_override_constants/margin_left = 15
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 15
theme_override_constants/margin_bottom = 5

[node name="StatusLabel" type="Label" parent="MarginContainer/VBoxContainer/StatusPanel/MarginContainer"]
unique_name_in_owner = true
layout_mode = 2
theme_override_fonts/font = ExtResource("2_qe2ex")
theme_override_font_sizes/font_size = 30
text = "Status: [undefined]"
vertical_alignment = 1
